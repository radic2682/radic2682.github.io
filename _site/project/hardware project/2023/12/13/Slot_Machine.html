<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XNNPBKM8PX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XNNPBKM8PX');
</script>

<title>Slot Machine</title>

<!-- Favicon -->
<link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">

<!-- CSS -->
<link rel="stylesheet" href="/assets/css/styles.css">

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Dancing+Script:wght@400;500;600;700&family=Dongle:wght@300;400;700&family=Gugi&family=Karla:wght@200;300;400;500;600;700;800&family=Katibeh&family=Noto+Sans+KR:wght@100;200;300;400;500;600;700;800;900&family=Pacifico&family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">


<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XNNPBKM8PX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XNNPBKM8PX');
</script>


<!-- Naver Search Adviser -->
<meta name="naver-site-verification" content="13447803628be075605281680bfa7ae08734c2b3" />


<!-- Math -->


<meta property="og:image" content="https://github.com/radic2682/radic2682.github.io/assets/11177959/c461f83d-b4bc-4998-badd-cfc7d5945817">
<meta property="og:title" content="traumhaft">
<meta property="og:description" content="Sun Hong의 개인 블로그 - 방가방가">

  </head>

  <body>

    <div id="sidebar">
      <div class="menu_close_btn">
    <img width="64" height="64" src="https://img.icons8.com/sf-black-filled/64/x.png" alt="x" onclick="menu_close_click()"/>
</div>

<div class="profile">
    <div class="profile_pic">
        <img src="/assets/images/me.png" alt="It's me">
    </div>
    <p>Sun Hong</p>
</div>



<div class="contact sidebar_box">
    <h1>Contact Me</h1>
    <div class="mail contact_box">
        <img width="96" height="96" src="https://img.icons8.com/fluency/96/mail--v1.png" alt="mail--v1"/>
        <a href="matilto:32182479@dankook.ac.kr">32182479@dankook.ac.kr</a>
    </div>
    <div class="linkedin contact_box">
        <img width="96" height="96" src="https://img.icons8.com/color/96/linkedin.png" alt="linkedin"/>	
        <a href="https://www.linkedin.com/in/sunhong-an/">Linked In</a>
    </div>
    <div class="notion contact_box">
        <img width="64" height="64" src="https://img.icons8.com/cute-clipart/64/notion.png" alt="notion"/>	
        <a href="https://www.notion.so/Sun-Hong-78ee5a443bfd49aab679d33f8c0697ef?pvs=4/">Portfolio</a>
    </div>
    <div class="github contact_box">
        <img width="96" height="96" src="https://img.icons8.com/color/96/github.png" alt="github"/>
        <a href="https://github.com/radic2682">Github</a>
    </div>
</div>


<div id="category" class="sidebar_box">
    <h1>Category<span class="count">74</span></h1>
    <ul class="menu_list">
        
    
        

            
                

            
                

            
                

            
                

            
                

            
                

            
                

            
                

            
                

            
                

            
                

            
                

            
                

            
                

            
                

            
                

            
                

            
                

            
    
    
            
    
            
    
            <div class="cat_box">
                <li class="cat_title">
                    <img width="96" height="96" src="https://img.icons8.com/external-goofy-color-kerismaker/96/external-Project-graphic-design-goofy-color-kerismaker.png" alt="external-Project-graphic-design-goofy-color-kerismaker"/>
                    <a href="/category/Project/">Project</a>
                </li>
        
                
                    <ul class="cat_part">
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="64" height="64" src="https://img.icons8.com/wired/64/processor.png" alt="processor"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Project/Hardware Project/" class="">Hardware Project<span class="count_m">11</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="50" height="50" src="https://img.icons8.com/ios/50/iphone14-pro.png" alt="iphone14-pro"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Project/App Project/" class="">App Project<span class="count_m">1</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="100" height="100" src="https://img.icons8.com/ios/100/web.png" alt="web"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Project/Web Project/" class="">Web Project<span class="count_m">1</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="96" height="96" src="https://img.icons8.com/windows/96/artificial-intelligence.png" alt="artificial-intelligence"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Project/Ai Project/" class="">Ai Project<span class="count_m">0</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="64" height="64" src="https://img.icons8.com/external-kiranshastry-lineal-kiranshastry/64/external-more-multimedia-kiranshastry-lineal-kiranshastry.png" alt="external-more-multimedia-kiranshastry-lineal-kiranshastry"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Project/etc Project/" class="">etc Project<span class="count_m">3</span></a>
                            </li>
                        
                    </ul>
                
            </div>
    
        

            
    
    
            
    
            
    
            <div class="cat_box">
                <li class="cat_title">
                    <img width="53" height="53" src="https://img.icons8.com/external-vectorslab-outline-color-vectorslab/53/external-brain-processor-machine-learning-vectorslab-outline-color-vectorslab.png" alt="external-brain-processor-machine-learning-vectorslab-outline-color-vectorslab"/>
                    <a href="/category/Ai%20Note/">Ai Note</a>
                </li>
        
                
                    <ul class="cat_part">
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                        <img width="68" height="68" src="https://img.icons8.com/external-smashingstocks-mixed-smashing-stocks/68/external-deep-learning-science-smashingstocks-mixed-smashing-stocks.png" alt="external-deep-learning-science-smashingstocks-mixed-smashing-stocks"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Ai%20Note/Deep Learning/" class="">Deep Learning<span class="count_m">0</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="50" height="50" src="https://img.icons8.com/ios/50/machine-learning.png" alt="machine-learning"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Ai%20Note/Machine Learning/" class="">Machine Learning<span class="count_m">1</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                        <img width="64" height="64" src="https://img.icons8.com/glyph-neue/64/note.png" alt="note"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Ai%20Note/Ai Study Note/" class="">Ai Study Note<span class="count_m">12</span></a>
                            </li>
                        
                    </ul>
                
            </div>
    
        

            
    
    
            
    
            
    
            <div class="cat_box">
                <li class="cat_title">
                    <img width="64" height="64" src="https://img.icons8.com/external-flaticons-lineal-color-flat-icons/64/external-hardware-technology-ecommerce-flaticons-lineal-color-flat-icons.png" alt="external-hardware-technology-ecommerce-flaticons-lineal-color-flat-icons"/>
                    <a href="/category/Hardware%20Note/">Hardware Note</a>
                </li>
        
                
                    <ul class="cat_part">
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="96" height="96" src="https://img.icons8.com/external-tal-revivo-bold-tal-revivo/96/external-raspberry-pi-is-a-small-and-affordable-computer-that-you-can-use-to-learn-programming-logo-bold-tal-revivo.png" alt="external-raspberry-pi-is-a-small-and-affordable-computer-that-you-can-use-to-learn-programming-logo-bold-tal-revivo"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Hardware%20Note/Embeded Note/" class="">Embeded Note<span class="count_m">8</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="64" height="64" src="https://img.icons8.com/external-kiranshastry-lineal-kiranshastry/64/external-chip-interface-kiranshastry-lineal-kiranshastry.png" alt="external-chip-interface-kiranshastry-lineal-kiranshastry"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Hardware%20Note/SoC Note/" class="">SoC Note<span class="count_m">8</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="100" height="100" src="https://img.icons8.com/ios/100/motherboard.png" alt="motherboard"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Hardware%20Note/Microprocessor Note/" class="">Microprocessor Note<span class="count_m">6</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="96" height="96" src="https://img.icons8.com/pulsar-line/96/my-computer.png" alt="my-computer"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Hardware%20Note/Computer Structure Note/" class="">Computer Structure Note<span class="count_m">6</span></a>
                            </li>
                        
                    </ul>
                
            </div>
    
        

            
    
    
            
    
            
    
            <div class="cat_box">
                <li class="cat_title">
                    <img width="64" height="64" src="https://img.icons8.com/dusk/64/saving-book.png" alt="saving-book"/>
                    <a href="/category/Study/">Study</a>
                </li>
        
                
                    <ul class="cat_part">
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="48" height="48" src="https://img.icons8.com/badges/48/c-plus-plus-logo.png" alt="c-plus-plus-logo"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Study/C & CPP/" class="">C & CPP<span class="count_m">4</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="50" height="50" src="https://img.icons8.com/ios/50/genealogy.png" alt="genealogy"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Study/Algorithm/" class="">Algorithm<span class="count_m">0</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="50" height="50" src="https://img.icons8.com/ios/50/git.png" alt="git"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Study/GIT/" class="">GIT<span class="count_m">10</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="64" height="64" src="https://img.icons8.com/external-creatype-outline-colourcreatype/64/external-electron-science-education-outline-creatype-outline-colourcreatype.png" alt="external-electron-science-education-outline-creatype-outline-colourcreatype"/>
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Study/Electron/" class="">Electron<span class="count_m">1</span></a>
                            </li>
                        
                    </ul>
                
            </div>
    
        

            
    
    
            
    
            
    
            <div class="cat_box">
                <li class="cat_title">
                    <img width="64" height="64" src="https://img.icons8.com/external-flatart-icons-lineal-color-flatarticons/64/external-idea-user-interface-flatart-icons-lineal-color-flatarticons.png" alt="external-idea-user-interface-flatart-icons-lineal-color-flatarticons"/>
                    <a href="/category/Tips/">Tips</a>
                </li>
        
                
                    <ul class="cat_part">
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="96" height="96" src="https://img.icons8.com/windows/96/maintenance.png" alt="maintenance"/>
                                    
                                
    
                                
                                
    
                                <a href="/category/Tips/Tools/" class="">Tools<span class="count_m">0</span></a>
                            </li>
                        
    
                            
    
                            
    
                            <li>
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        <img width="100" height="100" src="https://img.icons8.com/ios/100/blog.png" alt="blog"/>
                                    
                                
                                    
                                
    
                                
                                
    
                                <a href="/category/Tips/GitHub & Blog/" class="">GitHub & Blog<span class="count_m">2</span></a>
                            </li>
                        
                    </ul>
                
            </div>
    
        
    </ul>
</div>









<div id="user_panel" class="sidebar_box">
    <h1>User Panel</h1>
    <div class="set_ele">
        <a href="/">
            <img width="96" height="96" src="https://img.icons8.com/fluency/96/home.png" alt="home"/>
        </a>
        <a href="/visiting/">
            <img src="/assets/images/logo_dragon_64x64.png" alt="Dragon">
        </a>
        <a href="/search/">
            <img width="40" height="40" src="https://img.icons8.com/office/40/search--v1.png" alt="search--v1"/>
        </a>
    </div>
</div>


<div id="control_panel" class="sidebar_box">
    <h1>Control Panel</h1>
    <div class="set_ele">
        <a href="https://gaac.vercel.app/">
            <img width="96" height="96" src="https://gaac.vercel.app/assets/images/mascot.png" alt="image--v1"/>
        </a>
        <a href="https://analytics.google.com/analytics/">
            <img width="96" height="96" src="https://img.icons8.com/fluency/96/analytics--v1.png" alt="analytics--v1"/>
        </a>
        <a href="https://search.google.com/u/2/search-console?resource_id=https%3A%2F%2Fradic2682.github.io%2F">
            <img width="64" height="64" src="https://img.icons8.com/external-bearicons-outline-color-bearicons/64/external-Search-website-bearicons-outline-color-bearicons.png" alt="external-Search-website-bearicons-outline-color-bearicons"/>
        </a>
        <a href="https://searchadvisor.naver.com/console/board">
            <img width="64" height="64" src="https://img.icons8.com/external-wanicon-two-tone-wanicon/64/external-search-seo-and-web-wanicon-two-tone-wanicon.png" alt="external-search-seo-and-web-wanicon-two-tone-wanicon"/>
        </a>
    </div>
</div>

<!-- <div id="count" class="sidebar_box">
    <h1>Count</h1>
    <div class="set_ele">
        <a href="https://hits.seeyoufarm.com"><img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fradic2682.github.io&count_bg=%2391B0DD&title_bg=%2318253A&icon=&icon_color=%23580000&title=hits&edge_flat=false"/></a>
    </div>
</div> -->


<button id="sidebar_on_off_btn">
    <img width="64" height="64" src="/assets/images/icon_menu.png" alt="menu" onclick="menu_tag_click()"/>
</button>


    </div>

    <div class="all_wrapper">
      <div id="sidebar_area"></div>

      <div id="content_area">

        <div id="content_area_wrapper">

          <div id="top_area">
            <div id="scoll_bar"></div>
            <div id="top_nav_bar">
              <a href="/"><img src="/assets/images/logoB.png" alt="Home" class="logo"></a>
              <a href="/search/"><img id="top_search" src="/assets/images/icon_search_l.png" alt="Search"></a>
            </div>
          </div>
  
          <div id="content"> <div id="post_page">
    <div class="backg"></div>
    <div class="catShelter">
        <div class="window">
            <img class="castle" src="/assets/images/castle.png" alt="castle">
            <div class="kitty">
                <div class="ear"></div>
            </div>
            <div class="moon"></div>
            <div class="star"></div>
        </div>
    </div>

    <div class="post_wapper">
        <div id="head">

            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                        
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                        

                        <div class="postpage_category_v" style="background-color: #EEDEE4;">
                            <p><a href="/category/Project/Hardware%20Project/">Hardware Project</a></p>
                        </div>

                        
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            
                
                    
                
                    
                
            

            <h1>Slot Machine</h1>

            <div class="mini_box_wAd">
                <div class="mini_box_writer">
                    <img width="96" height="96" src="https://img.icons8.com/color/96/user-typing-using-typewriter.png" alt="user-typing-using-typewriter"/>
                    <p>Sun Hong</p>	
                </div>
                <p class="date">2023년 12월 13일</p>
            </div>
        </div>

        <div id="body">

            <div class="article">
                <h1 id="1-설계-내용">1. 설계 내용</h1>

<p>우선 start 신호가 0인 경우 start 신호가 0인 경우 출력은 입력을 x1배 한 값이 출력되며, 3개의 random 값은 000으로 초기화된다. start 신호가 1인 경우에는 아래의 슬롯머신의 동작이 수행된다. 우선 Timer를 이용하여 Linear Feedback Shift Register에 Seed값을 부여하고 이를 이용해 0~9까지의 3개의 BCD 형태의 4비트 이진수 random 값을 3개를 출력한다. 입력으로는 10진수 1~100까지의 숫자를 이진수 형태로 7비트 입력으로 부여할 수 있으며, BCD 형태의 4비트 이진수 숫자가 3개가 일치하는 경우는 x10배의 출력을, 숫자 2개가 일치하는 경우 x5배의 출력을, 숫자가 1개가 일치하는 경우 x2배의 입력 대비 값이 이진수 형태로 출력된다.</p>

<h1 id="2-블록도-및-서브-블록의-정의">2. 블록도 및 서브 블록의 정의</h1>
<h2 id="1-블록도">1) 블록도</h2>

<p><img src="https://github.com/radic2682/radic2682.github.io/assets/11177959/a9b7ccde-c5bb-4ef9-8e98-8ac60a23a93f" alt="image" /></p>

<p><img src="https://github.com/radic2682/radic2682.github.io/assets/11177959/fe753e03-cba4-4eef-9ae2-9557f3994104" alt="image" /></p>

<h2 id="2-서브-블록">2) 서브 블록</h2>

<h3 id="1-random-module">(1) random module</h3>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nb">random</span> <span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="nb">random</span><span class="p">);</span>
    <span class="kt">input</span> <span class="kt">wire</span> <span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">start</span><span class="p">;</span>
    <span class="kt">input</span> <span class="kt">wire</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">q</span><span class="p">;</span>
    <span class="kt">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="nb">random</span><span class="p">;</span>

    <span class="k">parameter</span> <span class="n">magic</span> <span class="o">=</span> <span class="mi">16'd6</span><span class="p">;</span>

    <span class="kt">reg</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">count</span><span class="p">;</span>
    <span class="kt">reg</span> <span class="n">randomed</span><span class="p">;</span>

    <span class="k">always</span> <span class="o">@</span><span class="p">(</span><span class="kt">posedge</span> <span class="n">clock</span><span class="p">,</span> <span class="kt">negedge</span> <span class="n">reset_b</span><span class="p">)</span>
    <span class="k">begin</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">reset_b</span><span class="p">)</span> <span class="k">begin</span>
            <span class="n">count</span> <span class="o">&lt;=</span> <span class="mb">16'b0</span><span class="p">;</span>
            <span class="nb">random</span> <span class="o">&lt;=</span> <span class="mb">16'b0</span><span class="p">;</span>
            <span class="n">randomed</span> <span class="o">&lt;=</span> <span class="mb">1'b0</span><span class="p">;</span>
        <span class="k">end</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">start</span><span class="p">)</span> <span class="k">begin</span>
            <span class="n">count</span> <span class="o">&lt;=</span> <span class="mb">16'b0</span><span class="p">;</span>
            <span class="nb">random</span> <span class="o">&lt;=</span> <span class="mb">16'b0</span><span class="p">;</span>
            <span class="n">randomed</span> <span class="o">&lt;=</span> <span class="mb">1'b0</span><span class="p">;</span>
        <span class="k">end</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">start</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">count</span> <span class="o">==</span> <span class="n">magic</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">randomed</span><span class="p">)</span> <span class="k">begin</span>
            <span class="n">count</span> <span class="o">&lt;=</span> <span class="n">count</span><span class="p">;</span>
            <span class="nb">random</span> <span class="o">&lt;=</span> <span class="n">q</span><span class="p">;</span>
            <span class="n">randomed</span> <span class="o">&lt;=</span> <span class="mb">1'b1</span><span class="p">;</span>
        <span class="k">end</span>
        <span class="k">else</span> <span class="k">begin</span>
            <span class="n">count</span> <span class="o">&lt;=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="nb">random</span> <span class="o">&lt;=</span> <span class="nb">random</span><span class="p">;</span>
            <span class="n">randomed</span> <span class="o">&lt;=</span> <span class="n">randomed</span><span class="p">;</span>
        <span class="k">end</span>
    <span class="k">end</span>
<span class="k">endmodule</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">입력</code>: clock, reset_b, start, q</p>

<p><code class="language-plaintext highlighter-rouge">출력</code>: random</p>

<p>random은 clock, reset_b, start, q를 입력으로 받아 random값을 출력하는 모듈이다. q는 lfsr의 출력값으로 16bit의 랜덤값이다. posedge에서 q는 매번 달라진다. 이는 lfsr 모듈의 설명에서 자세히 다룬다.</p>

<p>magic이라는 파라미터는 이 lfsr 모듈의 q를 6+1번 달라지게 한다. 즉, lfsr 모듈을 7번 뒤에, 7번의 posedge후에 나오는 값을 random의 출력으로 나올 수 있도록 해준다. count가 0부터 magic까지 증가하는데, 이는 else 구문에서 확인할 수 있다. 또한, 만약 count가 7에 도달했다면 randomed는 1이 되어 더 이상 반복되지 않는다.</p>

<p>magic값은 임의의 값으로 만약 15번 섞어주고 싶다면 14로 설정하면 된다.</p>

<h3 id="2-lfsr-module">(2) lfsr module</h3>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="n">lfsr</span> <span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">seed_pulse</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">q</span><span class="p">);</span>
    <span class="kt">input</span> <span class="kt">wire</span> <span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">seed_pulse</span><span class="p">;</span> <span class="c1">// seed_pulse: seed를 딱 한번만 주기 위해 사용</span>
    <span class="kt">input</span> <span class="kt">wire</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">count</span><span class="p">;</span>

    <span class="kt">output</span> <span class="kt">wire</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">q</span><span class="p">;</span>

    <span class="kt">reg</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">r_reg</span><span class="p">;</span>
    <span class="kt">wire</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">r_next</span><span class="p">;</span>
    <span class="kt">wire</span> <span class="n">feedback_value</span><span class="p">;</span>

    <span class="k">always</span> <span class="o">@</span><span class="p">(</span><span class="kt">posedge</span> <span class="n">clock</span><span class="p">,</span> <span class="kt">negedge</span> <span class="n">reset_b</span><span class="p">)</span>
    <span class="k">begin</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">reset_b</span><span class="p">)</span>
            <span class="n">r_reg</span> <span class="o">&lt;=</span> <span class="mb">16'b1</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">seed_pulse</span><span class="p">)</span>
            <span class="n">r_reg</span> <span class="o">&lt;=</span> <span class="n">count</span><span class="p">;</span>
        <span class="k">else</span>
            <span class="n">r_reg</span> <span class="o">&lt;=</span> <span class="n">r_next</span><span class="p">;</span>
    <span class="k">end</span>

    <span class="k">assign</span> <span class="n">feedback_value</span> <span class="o">=</span> <span class="n">r_reg</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span> <span class="o">^</span> <span class="n">r_reg</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">^</span> <span class="n">r_reg</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="c1">//lfsr의 섞어주는 기능</span>

    <span class="k">assign</span> <span class="n">r_next</span> <span class="o">=</span> <span class="o">{</span><span class="n">feedback_value</span><span class="p">,</span> <span class="n">r_reg</span><span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">1</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
    <span class="k">assign</span> <span class="n">q</span> <span class="o">=</span> <span class="n">r_reg</span><span class="p">;</span>
<span class="k">endmodule</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">입력</code>: clock, reset_b, seed_pulse, count</p>

<p><code class="language-plaintext highlighter-rouge">출력</code>: q</p>

<p>입력으로 clock, reset_b, seed_pulse, count를 받아, 출력으로 q를 출력한다. 여기서 출력 q는 위 ramdom module의 input의 활용된다.</p>

<p>lfsr은 선형 되먹임 시프트 레지스터이다. 시프트 레지스터의 일종으로, 레지스터에 입력되는 값이 이전 상태 값들의 선형 함수로 계산되는 구조를 가지고 있다. 이때 사용되는 선형 함수는 주로 배타적 논리합(XOR)이다. LFSR의 초기 비트 값은 시드(seed)라고 부른다. LFSR의 동작은 결정론적이기 때문에, LFSR로 생성되는 값의 수열은 그 이전 값에 의해 결정된다. 또한, 레지스터가 가질 수 있는 값의 개수는 유한하기 때문에, 이 수열은 특정한 주기에 의해 반복된다. 하지만 선형 함수를 잘 선택한다면 주기가 길고 무작위적으로 보이는 수열을 생성할 수 있다. 즉, 난수를 만들 수 있다.</p>

<p>다음상태에 영향을 주는 비트 위치의 목록은 탭 수열이라고 불린다. 여기서는 13, 4, 0을 선택했다. 만약 다른 값을 선택해도 괜찮다. 섞어주는 방식, 즉 섞어주는 방정식이 달라질 뿐이다.</p>

<p>seed값은 lsfr이 동작을 시작하는 시점에서 한번만 부여해야 하는 특징이 있다. 이를 구현하기 위해 seed_pulse를 이용한다. see_pulse는 counter module로부터 받아온다. 어떻게 한번만 주는 지는 counter module에서 기술했다. feedback_value는 섞인 값이며 선형 레지스터의 [15]에 이 값이 들어가게 되고 [0]에 있던 값은 밀려 사라지게 된다. 이를 위 코드에서는 assign문으로 기술하였고 r_next이다. 즉, clock이 한번 동작할 때마다 섞인 값이 [15]에 들어가고 한자리씩 밀린다. 이렇게 생긴 랜덤값은 r_reg에 할당되고 다시 q에 할당되어 출력값이 된다.</p>

<p>위 random module에서 magic은 이 lfsr을 몇 번 돌려줄지, 몇 번 섞어줄지를 결정한다. 그 수는 클럭의 posdege에서 동작하므로 클럭의 횟수와도 같다.</p>

<p>lfsr의 시드값으로는 counter의 값을 사용한다. 즉, 시스템이 작동 후 counter가 증가하게 되고, start가 1이 됐을 때 counter값이 lfsr에 들어가게 된다. 위에서 설명했듯이 이 행위는 초기화가 될 때까지 단 한번 발생한다.</p>

<p><img src="https://github.com/radic2682/radic2682.github.io/assets/11177959/1af743b6-5b8e-491d-b17f-adeb758c6083" alt="image" /></p>

<h3 id="3-counter">(3) counter</h3>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="n">counter</span> <span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">seed_pulse</span><span class="p">);</span>
    <span class="kt">input</span> <span class="kt">wire</span> <span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">start</span><span class="p">;</span>
    <span class="kt">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">count</span><span class="p">;</span>
    <span class="kt">output</span> <span class="kt">reg</span> <span class="n">seed_pulse</span><span class="p">;</span>

    <span class="k">always</span> <span class="o">@</span><span class="p">(</span><span class="kt">posedge</span> <span class="n">clock</span><span class="p">,</span> <span class="kt">negedge</span> <span class="n">reset_b</span><span class="p">)</span>
    <span class="k">begin</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">reset_b</span><span class="p">)</span>
            <span class="n">count</span> <span class="o">&lt;=</span> <span class="mb">16'b0</span><span class="p">;</span>
        <span class="k">else</span>
            <span class="n">count</span> <span class="o">&lt;=</span> <span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">end</span>

    <span class="kt">reg</span> <span class="n">pushed</span><span class="p">;</span>

    <span class="c1">// 딱한번만 줄때 유용하게 사용  </span>
    <span class="c1">// pushed 값 설정 &lt;start가 0이 되기 전까지 1을 유지, start가 0이되면 pushed를 0으로 만듦&gt;</span>
    <span class="k">always</span> <span class="o">@</span><span class="p">(</span><span class="kt">posedge</span> <span class="n">clock</span><span class="p">,</span> <span class="kt">negedge</span> <span class="n">reset_b</span><span class="p">)</span>
    <span class="k">begin</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">reset_b</span><span class="p">)</span>
            <span class="n">pushed</span> <span class="o">&lt;=</span> <span class="mb">1'b0</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">pushed</span> <span class="o">&amp;</span> <span class="n">start</span><span class="p">)</span>
            <span class="n">pushed</span> <span class="o">&lt;=</span> <span class="mb">1'b1</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">start</span><span class="p">)</span>
            <span class="n">pushed</span> <span class="o">&lt;=</span> <span class="mb">1'b0</span><span class="p">;</span>
    <span class="k">end</span>

    <span class="c1">// seed_pulse의 생성  =&gt; start가 1이 될때 딱 한번만 seed_pulse는 1이 되며, 다를 때는 0유지</span>
    <span class="k">always</span> <span class="o">@</span><span class="p">(</span><span class="kt">posedge</span> <span class="n">clock</span><span class="p">,</span> <span class="kt">negedge</span> <span class="n">reset_b</span><span class="p">)</span>
    <span class="k">begin</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">reset_b</span><span class="p">)</span> <span class="c1">// reset:1</span>
            <span class="n">seed_pulse</span> <span class="o">&lt;=</span> <span class="mb">1'b0</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">pushed</span> <span class="o">&amp;</span> <span class="n">start</span><span class="p">)</span> <span class="c1">// pushed:0 start:1  =&gt; start가 0에서 1로 바뀔때, pushed는 0이므로 딱 한번 발생</span>
            <span class="n">seed_pulse</span> <span class="o">&lt;=</span> <span class="mb">1'b1</span><span class="p">;</span>
        <span class="k">else</span> <span class="c1">// pushed:1</span>
            <span class="n">seed_pulse</span> <span class="o">&lt;=</span> <span class="mb">1'b0</span><span class="p">;</span>
    <span class="k">end</span>
<span class="k">endmodule</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">입력</code>: clock, reset_b, start</p>

<p><code class="language-plaintext highlighter-rouge">출력</code>: count, seed_pulse</p>

<p>clock에 따라 증가하는 counter가 첫 번째 always 문에 기술되어 있다. 또한, lfsr에서 딱 한번의 seed값을 주기 위한 seed_pulse가 있고, seed_pluse를 만들기 위한 pushed를 만들기 위한 always문이 기술되어 있다.</p>

<p>pushed는 start가 0일때나 reset_b가 0이면 0이 입력되고, pushed가 0이고 start가 1이면 1이 입력된다. 즉, pushed가 0이고 start가 1이 될 때, seed_pulse는 1이 된다. 이후 pushed는 0이 되어 start가 1이 될 때, 단 한번만 작동한다.</p>

<h3 id="4-binary-to-bcd">(4) binary to BCD</h3>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="n">binary_to_BCD</span><span class="p">(</span><span class="n">binary</span><span class="p">,</span> <span class="n">digit10000</span><span class="p">,</span> <span class="n">digit1000</span><span class="p">,</span> <span class="n">digit100</span><span class="p">,</span> <span class="n">digit10</span><span class="p">,</span> <span class="n">digit0</span><span class="p">);</span>
    <span class="kt">input</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">binary</span><span class="p">;</span>
    <span class="kt">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">digit10000</span><span class="p">,</span> <span class="n">digit1000</span><span class="p">,</span> <span class="n">digit100</span><span class="p">,</span> <span class="n">digit10</span><span class="p">,</span> <span class="n">digit0</span><span class="p">;</span>
    <span class="kt">wire</span> <span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">c1</span><span class="p">,</span><span class="n">c2</span><span class="p">,</span><span class="n">c3</span><span class="p">,</span><span class="n">c4</span><span class="p">,</span><span class="n">c5</span><span class="p">,</span><span class="n">c6</span><span class="p">,</span><span class="n">c7</span><span class="p">,</span><span class="n">c8</span><span class="p">,</span><span class="n">c9</span><span class="p">,</span><span class="n">c10</span><span class="p">,</span><span class="n">c11</span><span class="p">,</span><span class="n">c12</span><span class="p">,</span><span class="n">c13</span><span class="p">,</span><span class="n">c14</span><span class="p">,</span><span class="n">c15</span><span class="p">,</span><span class="n">c16</span><span class="p">,</span><span class="n">c17</span><span class="p">,</span><span class="n">c18</span><span class="p">,</span><span class="n">c19</span><span class="p">,</span><span class="n">c20</span><span class="p">,</span><span class="n">c21</span><span class="p">,</span><span class="n">c22</span><span class="p">,</span><span class="n">c23</span><span class="p">,</span><span class="n">c24</span><span class="p">,</span><span class="n">c25</span><span class="p">,</span><span class="n">c26</span><span class="p">,</span><span class="n">c27</span><span class="p">,</span><span class="n">c28</span><span class="p">,</span><span class="n">c29</span><span class="p">,</span><span class="n">c30</span><span class="p">,</span><span class="n">c31</span><span class="p">,</span><span class="n">c32</span><span class="p">,</span><span class="n">c33</span><span class="p">,</span><span class="n">c34</span><span class="p">;</span> <span class="c1">// add3's output</span>
    <span class="kt">reg</span> <span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">d1</span><span class="p">,</span><span class="n">d2</span><span class="p">,</span><span class="n">d3</span><span class="p">,</span><span class="n">d4</span><span class="p">,</span><span class="n">d5</span><span class="p">,</span><span class="n">d6</span><span class="p">,</span><span class="n">d7</span><span class="p">,</span><span class="n">d8</span><span class="p">,</span><span class="n">d9</span><span class="p">,</span><span class="n">d10</span><span class="p">,</span><span class="n">d11</span><span class="p">,</span><span class="n">d12</span><span class="p">,</span><span class="n">d13</span><span class="p">,</span><span class="n">d14</span><span class="p">,</span><span class="n">d15</span><span class="p">,</span><span class="n">d16</span><span class="p">,</span><span class="n">d17</span><span class="p">,</span><span class="n">d18</span><span class="p">,</span><span class="n">d19</span><span class="p">,</span><span class="n">d20</span><span class="p">,</span><span class="n">d21</span><span class="p">,</span><span class="n">d22</span><span class="p">,</span><span class="n">d23</span><span class="p">,</span><span class="n">d24</span><span class="p">,</span><span class="n">d25</span><span class="p">,</span><span class="n">d26</span><span class="p">,</span><span class="n">d27</span><span class="p">,</span><span class="n">d28</span><span class="p">,</span><span class="n">d29</span><span class="p">,</span><span class="n">d30</span><span class="p">,</span><span class="n">d31</span><span class="p">,</span><span class="n">d32</span><span class="p">,</span><span class="n">d33</span><span class="p">,</span><span class="n">d34</span><span class="p">;</span> <span class="c1">// add3's input</span>

    <span class="n">add3</span> <span class="n">a1</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span><span class="n">c1</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a2</span><span class="p">(</span><span class="n">d2</span><span class="p">,</span><span class="n">c2</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a3</span><span class="p">(</span><span class="n">d3</span><span class="p">,</span><span class="n">c3</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a4</span><span class="p">(</span><span class="n">d4</span><span class="p">,</span><span class="n">c4</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a5</span><span class="p">(</span><span class="n">d5</span><span class="p">,</span><span class="n">c5</span><span class="p">);</span>
    <span class="n">add3</span> <span class="n">a6</span><span class="p">(</span><span class="n">d6</span><span class="p">,</span><span class="n">c6</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a7</span><span class="p">(</span><span class="n">d7</span><span class="p">,</span><span class="n">c7</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a8</span><span class="p">(</span><span class="n">d8</span><span class="p">,</span><span class="n">c8</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a9</span><span class="p">(</span><span class="n">d9</span><span class="p">,</span><span class="n">c9</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a10</span><span class="p">(</span><span class="n">d10</span><span class="p">,</span><span class="n">c10</span><span class="p">);</span>
    <span class="n">add3</span> <span class="n">a11</span><span class="p">(</span><span class="n">d11</span><span class="p">,</span><span class="n">c11</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a12</span><span class="p">(</span><span class="n">d12</span><span class="p">,</span><span class="n">c12</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a13</span><span class="p">(</span><span class="n">d13</span><span class="p">,</span><span class="n">c13</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a14</span><span class="p">(</span><span class="n">d14</span><span class="p">,</span><span class="n">c14</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a15</span><span class="p">(</span><span class="n">d15</span><span class="p">,</span><span class="n">c15</span><span class="p">);</span>
    <span class="n">add3</span> <span class="n">a16</span><span class="p">(</span><span class="n">d16</span><span class="p">,</span><span class="n">c16</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a17</span><span class="p">(</span><span class="n">d17</span><span class="p">,</span><span class="n">c17</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a18</span><span class="p">(</span><span class="n">d18</span><span class="p">,</span><span class="n">c18</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a19</span><span class="p">(</span><span class="n">d19</span><span class="p">,</span><span class="n">c19</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a20</span><span class="p">(</span><span class="n">d20</span><span class="p">,</span><span class="n">c20</span><span class="p">);</span>
    <span class="n">add3</span> <span class="n">a21</span><span class="p">(</span><span class="n">d21</span><span class="p">,</span><span class="n">c21</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a22</span><span class="p">(</span><span class="n">d22</span><span class="p">,</span><span class="n">c22</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a23</span><span class="p">(</span><span class="n">d23</span><span class="p">,</span><span class="n">c23</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a24</span><span class="p">(</span><span class="n">d24</span><span class="p">,</span><span class="n">c24</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a25</span><span class="p">(</span><span class="n">d25</span><span class="p">,</span><span class="n">c25</span><span class="p">);</span>
    <span class="n">add3</span> <span class="n">a26</span><span class="p">(</span><span class="n">d26</span><span class="p">,</span><span class="n">c26</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a27</span><span class="p">(</span><span class="n">d27</span><span class="p">,</span><span class="n">c27</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a28</span><span class="p">(</span><span class="n">d28</span><span class="p">,</span><span class="n">c28</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a29</span><span class="p">(</span><span class="n">d29</span><span class="p">,</span><span class="n">c29</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a30</span><span class="p">(</span><span class="n">d30</span><span class="p">,</span><span class="n">c30</span><span class="p">);</span>
    <span class="n">add3</span> <span class="n">a31</span><span class="p">(</span><span class="n">d31</span><span class="p">,</span><span class="n">c31</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a32</span><span class="p">(</span><span class="n">d32</span><span class="p">,</span><span class="n">c32</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a33</span><span class="p">(</span><span class="n">d33</span><span class="p">,</span><span class="n">c33</span><span class="p">);</span> <span class="n">add3</span> <span class="n">a34</span><span class="p">(</span><span class="n">d34</span><span class="p">,</span><span class="n">c34</span><span class="p">);</span>

    <span class="k">always</span> <span class="o">@</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">begin</span>
        <span class="c1">// 1st vertical line from right</span>
        <span class="n">d1</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="mb">1'b0</span><span class="p">,</span> <span class="n">binary</span><span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">13</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d2</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c1</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d3</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c2</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d4</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c3</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d5</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c4</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d6</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c5</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d7</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c6</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d8</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c7</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d9</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c8</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d10</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c9</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d11</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c10</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d12</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c11</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d13</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c12</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>

        <span class="c1">// 2nd vertical line from right</span>
        <span class="n">d14</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="mb">1'b0</span><span class="p">,</span> <span class="n">c1</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">c2</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">c3</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d15</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c14</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c4</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d16</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c15</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c5</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d17</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c16</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c6</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d18</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c17</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c7</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d19</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c18</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c8</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d20</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c19</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c9</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d21</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c20</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c10</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d22</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c21</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c11</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d23</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c22</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c12</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>

        <span class="c1">// 3rd vertical line from right</span>
        <span class="n">d24</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="mb">1'b0</span><span class="p">,</span> <span class="n">c14</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">c15</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">c16</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d25</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c24</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c17</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d26</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c25</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c18</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d27</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c26</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c19</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d28</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c27</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c20</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d29</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c28</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c21</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d30</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c29</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c22</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>

        <span class="c1">// 4th vertical line from right</span>
        <span class="n">d31</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="mb">1'b0</span><span class="p">,</span> <span class="n">c24</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">c25</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">c26</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d32</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c31</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c27</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d33</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c32</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c28</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">d34</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c33</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c29</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>

        <span class="c1">// output</span>
        <span class="n">digit0</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c13</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">binary</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">digit10</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c23</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c13</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">digit100</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c30</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c23</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">digit1000</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c34</span><span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span> <span class="n">c30</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
        <span class="n">digit10000</span> <span class="o">&lt;=</span> <span class="o">{</span><span class="n">c31</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">c32</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">c33</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">c34</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
    <span class="k">end</span>
<span class="k">endmodule</span>
</code></pre></div></div>

<p><img src="https://github.com/radic2682/radic2682.github.io/assets/11177959/049e7e38-0174-4aa2-b6a3-5f06a785be40" alt="image" /></p>

<p><code class="language-plaintext highlighter-rouge">입력</code>: binary</p>

<p><code class="language-plaintext highlighter-rouge">출력</code>: digit10000, digit1000, digit100, digit10, digit0</p>

<p>Binary to BCD, 즉 이진수를 BCD로 바꿔주는 회로를 기술하였다. BCD는 이진수 네 자리를 묶어 십진수 한 자리로 사용하는 기수법이다. 변환하는 방법은 다음과 같다.</p>

<p>① Binary 값을 차례로 MSB 비트부터 시프트하여 처리</p>

<p>② 5보다 크거나 같다면 3을 더하고 시프트 처리</p>

<p>③ 5보다 작다면 3을 더하지 않고 시프트 처리</p>

<p>이에 대해 for문으로 기술하면 다음과 같다. 하지만 for문은 합성이 안되기 때문에 아래 그림과 같이 조합회로로 다시 직접 기술하였다.</p>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="n">bin2bcd</span><span class="p">(</span>
   <span class="kt">input</span> <span class="p">[</span><span class="mi">13</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">bin</span><span class="p">,</span>
   <span class="kt">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">bcd</span>
   <span class="p">);</span>
   
<span class="kt">integer</span> <span class="n">i</span><span class="p">;</span>
    
<span class="k">always</span> <span class="o">@</span><span class="p">(</span><span class="n">bin</span><span class="p">)</span> <span class="k">begin</span>
    <span class="n">bcd</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>          
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">14</span><span class="p">;</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">begin</span>                  <span class="c1">//Iterate once for each bit in input number</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">bcd</span><span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">)</span> <span class="n">bcd</span><span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">bcd</span><span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">3</span><span class="p">;</span>     <span class="c1">//If any BCD digit is &gt;= 5, add three</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">bcd</span><span class="p">[</span><span class="mi">7</span><span class="o">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">)</span> <span class="n">bcd</span><span class="p">[</span><span class="mi">7</span><span class="o">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">bcd</span><span class="p">[</span><span class="mi">7</span><span class="o">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">bcd</span><span class="p">[</span><span class="mi">11</span><span class="o">:</span><span class="mi">8</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">)</span> <span class="n">bcd</span><span class="p">[</span><span class="mi">11</span><span class="o">:</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">bcd</span><span class="p">[</span><span class="mi">11</span><span class="o">:</span><span class="mi">8</span><span class="p">]</span> <span class="o">+</span> <span class="mi">3</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">bcd</span><span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">12</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">)</span> <span class="n">bcd</span><span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="n">bcd</span><span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">12</span><span class="p">]</span> <span class="o">+</span> <span class="mi">3</span><span class="p">;</span>
    <span class="n">bcd</span> <span class="o">=</span> <span class="o">{</span><span class="n">bcd</span><span class="p">[</span><span class="mi">14</span><span class="o">:</span><span class="mi">0</span><span class="p">],</span><span class="n">bin</span><span class="p">[</span><span class="mi">13</span><span class="o">-</span><span class="n">i</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>                <span class="c1">//Shift one bit, and shift in proper bit from input </span>
    <span class="k">end</span>
<span class="k">end</span>
<span class="k">endmodule</span>
</code></pre></div></div>

<p><img src="https://github.com/radic2682/radic2682.github.io/assets/11177959/a9cbc1e3-2acc-43c9-90f7-5f8054351405" alt="image" /></p>

<p><a href="https://slideplayer.com/slide/7076551/">출처</a></p>

<p>test bench를 작성하여 확인하였고, 결과가 올바르게 나오는 것을 확인할 수 있었다. 16bit의 binary이기 때문에 BCD로 변경하게 되면 5자리가 나오게 된다. 우리가 필요한 것은 3자리이므로 나머지 자리는 버려주면 된다. verilog에서는 wire를 연결하지 않고 놔두어도 괜찮기 때문에 이를 메인 module에서는 floating 상태로 두었다. 하지만 지금 16bit binary to BCD module의 역할은 5자리를 출력하는 것이기 때문에 언제든지 파생할 수 있게, 코드를 재활용할 수 있도록 output은 5자리로 놔두었다.</p>

<h3 id="5-add3">(5) add3</h3>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="n">add3</span><span class="p">(</span><span class="n">in</span><span class="p">,</span><span class="n">out</span><span class="p">);</span>
    <span class="kt">input</span> <span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">in</span><span class="p">;</span>
    <span class="kt">output</span> <span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">out</span><span class="p">;</span>
    <span class="kt">reg</span> <span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">out</span><span class="p">;</span>

    <span class="k">always</span> <span class="o">@</span> <span class="p">(</span><span class="n">in</span><span class="p">)</span>
    <span class="k">case</span> <span class="p">(</span><span class="n">in</span><span class="p">)</span>
        <span class="mb">4'b0000</span><span class="o">:</span> <span class="n">out</span> <span class="o">&lt;=</span> <span class="mb">4'b0000</span><span class="p">;</span>
        <span class="mb">4'b0001</span><span class="o">:</span> <span class="n">out</span> <span class="o">&lt;=</span> <span class="mb">4'b0001</span><span class="p">;</span>
        <span class="mb">4'b0010</span><span class="o">:</span> <span class="n">out</span> <span class="o">&lt;=</span> <span class="mb">4'b0010</span><span class="p">;</span>
        <span class="mb">4'b0011</span><span class="o">:</span> <span class="n">out</span> <span class="o">&lt;=</span> <span class="mb">4'b0011</span><span class="p">;</span>
        <span class="mb">4'b0100</span><span class="o">:</span> <span class="n">out</span> <span class="o">&lt;=</span> <span class="mb">4'b0100</span><span class="p">;</span>
        <span class="mb">4'b0101</span><span class="o">:</span> <span class="n">out</span> <span class="o">&lt;=</span> <span class="mb">4'b1000</span><span class="p">;</span>
        <span class="mb">4'b0110</span><span class="o">:</span> <span class="n">out</span> <span class="o">&lt;=</span> <span class="mb">4'b1001</span><span class="p">;</span>
        <span class="mb">4'b0111</span><span class="o">:</span> <span class="n">out</span> <span class="o">&lt;=</span> <span class="mb">4'b1010</span><span class="p">;</span>
        <span class="mb">4'b1000</span><span class="o">:</span> <span class="n">out</span> <span class="o">&lt;=</span> <span class="mb">4'b1011</span><span class="p">;</span>
        <span class="mb">4'b1001</span><span class="o">:</span> <span class="n">out</span> <span class="o">&lt;=</span> <span class="mb">4'b1100</span><span class="p">;</span>
        <span class="nl">default:</span> <span class="n">out</span> <span class="o">&lt;=</span> <span class="mb">4'b0000</span><span class="p">;</span>
    <span class="k">endcase</span>
<span class="k">endmodule</span>
</code></pre></div></div>

<p>이 모듈은 binary to BCD module에서 쓰기 위한 하위 모듈이다. 5[0101(2)]를 넘어간다면 3을 더해주는 덧셈기이다. 예를 들어 7[0111(2)] -&gt; 10[1010(2)], 7은 5를 넘으므로 3을 더한 10을 출력해준다.</p>

<h2 id="3-메인-블록">3) 메인 블록</h2>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="n">slot_machine</span> <span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">in_value1</span><span class="p">,</span> <span class="n">in_value2</span><span class="p">,</span> <span class="n">in_value3</span><span class="p">,</span> <span class="n">in_money</span><span class="p">,</span> <span class="n">out_random3</span><span class="p">,</span> <span class="n">out_random2</span><span class="p">,</span> <span class="n">out_random1</span><span class="p">,</span> <span class="n">out_money</span><span class="p">);</span>
    <span class="kt">input</span> <span class="kt">wire</span> <span class="n">clock</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">;</span>
    <span class="kt">input</span> <span class="kt">wire</span> <span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">in_value1</span><span class="p">,</span> <span class="n">in_value2</span><span class="p">,</span> <span class="n">in_value3</span><span class="p">;</span>
    <span class="kt">input</span> <span class="kt">wire</span> <span class="p">[</span><span class="mi">6</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">in_money</span><span class="p">;</span>
    <span class="kt">output</span> <span class="kt">wire</span> <span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">out_random3</span><span class="p">,</span> <span class="n">out_random2</span><span class="p">,</span> <span class="n">out_random1</span><span class="p">;</span> <span class="c1">// BCD의 5자리 중 뒷 3자리만 사용</span>
    <span class="kt">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mi">9</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">out_money</span><span class="p">;</span>
</code></pre></div></div>

<p>input과 output은 위와 같다. in_value1, in_value2, in_value3는 슬롯머신 사용자가 입력하는 값으로 랜덤값과 비교하여 숫자가 일치한다면 그에 상응하는 돈을 출력하게 된다. 또한, 사용자의 in_money를 입력으로 받는다.</p>

<p>out_random1, out_random2, out_random3은 생성된 랜덤값으로 사용자에게 보여주기 위해 출력으로 지정하였다. 또한 사용자에게 돈을 돌려주기 위해 out_money라는 값을 출력으로 설정했다.</p>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">// connection</span>
    <span class="kt">reg</span> <span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">state</span><span class="p">;</span>
    <span class="kt">reg</span> <span class="p">[</span><span class="mi">2</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">next_state</span><span class="p">;</span>
    <span class="kt">reg</span> <span class="p">[</span><span class="mi">6</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">memory_in_money</span><span class="p">;</span>
    <span class="kt">reg</span> <span class="n">memory_in_money_pushed</span><span class="p">;</span>

    <span class="c1">// parameter</span>
    <span class="k">parameter</span> <span class="n">S0</span> <span class="o">=</span> <span class="mi">2'd0</span><span class="p">,</span> <span class="n">S1</span> <span class="o">=</span> <span class="mi">2'd1</span><span class="p">,</span> <span class="n">S2</span> <span class="o">=</span> <span class="mi">2'd2</span><span class="p">,</span> <span class="n">S3</span> <span class="o">=</span> <span class="mi">2'd3</span><span class="p">;</span>

    <span class="c1">// wire</span>
    <span class="kt">wire</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="nb">random</span><span class="p">;</span>
    <span class="kt">wire</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">q</span><span class="p">;</span> <span class="c1">// lfsr 모듈의 출력값, random 모듈의 입력값</span>
    <span class="kt">wire</span> <span class="n">seed_pulse</span><span class="p">;</span> <span class="c1">// 1bit짜리 seed pulse =&gt; clock 모듈에서 나오는 값 "한번만 실행할 때를 나타냄"</span>
    <span class="kt">wire</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">count</span><span class="p">;</span> <span class="c1">// counter 모듈의 count값으로 lfsr의 seed로 사용</span>
    <span class="kt">wire</span> <span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">digit1000</span><span class="p">,</span> <span class="n">digit10000</span><span class="p">;</span> <span class="c1">//남은 값들 (BCD 1000자리, 10000자리 값들)</span>

    <span class="c1">// 파생</span>
    <span class="nb">random</span> <span class="n">r1</span> <span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="nb">random</span><span class="p">);</span>
    <span class="n">lfsr</span> <span class="n">l1</span> <span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">seed_pulse</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">q</span><span class="p">);</span>
    <span class="n">counter</span> <span class="n">c1</span> <span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">seed_pulse</span><span class="p">);</span>
    <span class="c1">// binary_to_BCD 파생: ramdom 모듈의 16비트 random값을 받아 BCD 5자리 추출</span>
    <span class="n">binary_to_BCD</span> <span class="n">btb1</span> <span class="p">(.</span><span class="n">binary</span><span class="p">(</span><span class="nb">random</span><span class="p">),</span> <span class="p">.</span><span class="n">digit10000</span><span class="p">(</span><span class="n">digit10000</span><span class="p">),</span> <span class="p">.</span><span class="n">digit1000</span><span class="p">(</span><span class="n">digit1000</span><span class="p">),</span> <span class="p">.</span><span class="n">digit100</span><span class="p">(</span><span class="n">out_random3</span><span class="p">),</span> <span class="p">.</span><span class="n">digit10</span><span class="p">(</span><span class="n">out_random2</span><span class="p">),</span> <span class="p">.</span><span class="n">digit0</span><span class="p">(</span><span class="n">out_random1</span><span class="p">));</span>
</code></pre></div></div>

<p>connection 주석 부분의 state와 nest_state는 reg 타입으로 각각 현재 상태와 다음 상태를 기억한다. 또한, memory_in_money는 start가 1이 되었을 때 1~100의 값이 올바르게 들어왔다면 그 때의 값을 저장하기 위해 사용된다. memory_in_money_pushed는 단 한번만 저장하기 위해서 사용된다. 계속 돈을 저장하게 되면 값이 바뀌기 때문이다.</p>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code>       <span class="c1">// 클럭의 상승엣지에서만 작동됨 reset_b에 1이 들어오면 언제든지 초기화</span>
    <span class="k">always</span> <span class="o">@</span> <span class="p">(</span><span class="kt">posedge</span> <span class="n">clock</span><span class="p">,</span> <span class="kt">negedge</span> <span class="n">reset_b</span><span class="p">)</span>
    <span class="k">begin</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">reset_b</span><span class="p">)</span> <span class="c1">// reset_b:0 -&gt; 상태 초기화</span>
            <span class="n">state</span> <span class="o">&lt;=</span> <span class="n">S0</span><span class="p">;</span>
        <span class="k">else</span> <span class="c1">// 일반적으로 state가 다음 state로 변경</span>
            <span class="n">state</span> <span class="o">&lt;=</span> <span class="n">next_state</span><span class="p">;</span>
    <span class="k">end</span>
</code></pre></div></div>

<p>next_state의 값이 변경이 된다면 현재 상태 state의 값을 다음 상태로 바꿔주기 위해 사용된다. 이 state값은 밑에서 case문에 의해 상태 변화가 일어나는 것처럼 기술이 가능하다. 만약 reset_b의 값이 0이 된다면 상태를 초기화시키는 문장도 서술하였다.</p>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c1">// start:1 이고 1&lt;=in_money&lt;=100일때의 in_money를 memory_in_money에 단 한번 저장</span>
    <span class="k">always</span> <span class="o">@</span><span class="p">(</span><span class="kt">posedge</span> <span class="n">clock</span><span class="p">,</span> <span class="kt">negedge</span> <span class="n">reset_b</span><span class="p">)</span>
    <span class="k">begin</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">reset_b</span><span class="p">)</span> <span class="k">begin</span>
            <span class="n">memory_in_money_pushed</span> <span class="o">&lt;=</span> <span class="mb">1'b0</span><span class="p">;</span>
            <span class="n">memory_in_money</span> <span class="o">&lt;=</span> <span class="mb">7'b0</span><span class="p">;</span>
        <span class="k">end</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">in_money</span> <span class="o">&gt;=</span> <span class="mi">7'd1</span> <span class="o">&amp;</span> <span class="n">in_money</span> <span class="o">&lt;=</span> <span class="mi">7'd100</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">random</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">memory_in_money_pushed</span> <span class="o">&amp;</span> <span class="n">start</span><span class="p">)</span> <span class="k">begin</span>
            <span class="n">memory_in_money_pushed</span> <span class="o">&lt;=</span> <span class="mb">1'b1</span><span class="p">;</span>
            <span class="n">memory_in_money</span> <span class="o">&lt;=</span> <span class="n">in_money</span><span class="p">;</span>

        <span class="k">end</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">start</span><span class="p">)</span> <span class="k">begin</span>
            <span class="n">memory_in_money_pushed</span> <span class="o">&lt;=</span> <span class="mb">1'b0</span><span class="p">;</span>
            <span class="n">memory_in_money</span> <span class="o">&lt;=</span> <span class="mb">7'b0</span><span class="p">;</span>
        <span class="k">end</span>
    <span class="k">end</span>
</code></pre></div></div>

<p>in_money는 1에서 100의 값을 가져야 하고 만약 그 값이 아닌 다른 값이 입력으로 들어온다면 올바른 값이 들어올 때까지 대기해야 한다. 그리고 만약 올바른 값이 들어온다면 memory_in_money_pushed을 통해 memory_in_money에 그 값을 저장하게 된다.</p>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="c1">// 상태천이를 위한 기술</span>
    <span class="k">always</span> <span class="o">@</span> <span class="p">(</span><span class="o">*</span><span class="p">)</span>
    <span class="k">begin</span>
        <span class="k">case</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
            <span class="nl">S0:</span> <span class="k">begin</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">start</span><span class="p">)</span> <span class="k">begin</span>
                    <span class="n">out_money</span> <span class="o">&lt;=</span> <span class="n">in_money</span><span class="p">;</span>
                    <span class="n">next_state</span> <span class="o">&lt;=</span> <span class="n">S0</span><span class="p">;</span>
                <span class="k">end</span>
                <span class="k">else</span> <span class="k">begin</span> <span class="c1">// start: 1</span>
                    <span class="n">out_money</span> <span class="o">&lt;=</span> <span class="n">in_money</span><span class="p">;</span>
                    <span class="n">next_state</span> <span class="o">&lt;=</span> <span class="n">S1</span><span class="p">;</span>
                <span class="k">end</span>
            <span class="k">end</span>
</code></pre></div></div>

<p>S0 상태에 대한 기술이다. 단순히 start가 1이 될 때까지 대기하면서, 입력의 돈을 출력으로 그대로 출력해준다.</p>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		     <span class="n">S1</span><span class="o">:</span> <span class="k">begin</span>
                <span class="k">if</span> <span class="p">(</span><span class="nb">random</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span><span class="k">begin</span>
                    <span class="n">next_state</span> <span class="o">&lt;=</span> <span class="n">S2</span><span class="p">;</span> <span class="c1">// random값이 들어와야 S2로 넘어감</span>
                <span class="k">end</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">in_money</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">|</span> <span class="n">in_money</span> <span class="o">&gt;</span> <span class="mi">7'd100</span> <span class="o">&amp;</span> <span class="nb">random</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">begin</span> <span class="c1">// 1~100의 머니가 들어오지 않았을때</span>
                    <span class="n">next_state</span> <span class="o">&lt;=</span> <span class="n">S1</span><span class="p">;</span>
                    <span class="n">out_money</span> <span class="o">&lt;=</span> <span class="n">in_money</span><span class="p">;</span>
                <span class="k">end</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">in_money</span> <span class="o">&gt;=</span> <span class="mi">7'd1</span> <span class="o">&amp;</span> <span class="n">in_money</span> <span class="o">&lt;=</span> <span class="mi">7'd100</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">random</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">begin</span> <span class="c1">// 1~100의 머니이고 random이 0일때 </span>
                    <span class="n">out_money</span> <span class="o">&lt;=</span> <span class="mb">1'b0</span><span class="p">;</span>
                    <span class="n">next_state</span> <span class="o">&lt;=</span> <span class="n">S1</span><span class="p">;</span>
                <span class="k">end</span>

            <span class="k">end</span>
</code></pre></div></div>

<p>S1 상태에 대한 기술이다. if문을 통해 여러 경우를 나누었다. 우선 랜덤이 0이면 S1 상태를 계속 유지한다. 그 이유는 랜덤값이 들어와야 사용자가 입력한 값과 비교를 할 수 있기 때문이다. 이 비교하는 상태가 S3인데, 랜덤값이 0일 때 S3가 되면 잘못된 값으로 비교할 수 있다는 문제를 가진다. S1 상태를 유지하면서 in_money가 1~100까지의 값을 받을 때까지 기다린다.</p>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="n">S2</span><span class="o">:</span> <span class="k">begin</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">out_random3</span> <span class="o">==</span> <span class="n">in_value3</span> <span class="o">&amp;</span> <span class="n">out_random2</span> <span class="o">==</span> <span class="n">in_value2</span> <span class="o">&amp;</span> <span class="n">out_random1</span> <span class="o">==</span> <span class="n">in_value1</span><span class="p">)</span> <span class="k">begin</span>
                    <span class="n">out_money</span> <span class="o">&lt;=</span> <span class="mb">4'b1010</span> <span class="o">*</span> <span class="n">memory_in_money</span><span class="p">;</span>
                    <span class="n">next_state</span> <span class="o">&lt;=</span> <span class="n">S3</span><span class="p">;</span>
                <span class="k">end</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="n">out_random3</span> <span class="o">==</span> <span class="n">in_value3</span> <span class="o">&amp;</span> <span class="n">out_random2</span> <span class="o">==</span> <span class="n">in_value2</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">out_random3</span> <span class="o">==</span> <span class="n">in_value3</span> <span class="o">&amp;</span> <span class="n">out_random1</span> <span class="o">==</span> <span class="n">in_value1</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">out_random2</span> <span class="o">==</span> <span class="n">in_value2</span> <span class="o">&amp;</span> <span class="n">out_random1</span> <span class="o">==</span> <span class="n">in_value1</span><span class="p">))</span> <span class="k">begin</span>
                    <span class="n">out_money</span> <span class="o">&lt;=</span> <span class="mb">4'b101</span> <span class="o">*</span> <span class="n">memory_in_money</span><span class="p">;</span>
                    <span class="n">next_state</span> <span class="o">&lt;=</span> <span class="n">S3</span><span class="p">;</span>
                <span class="k">end</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">out_random3</span> <span class="o">==</span> <span class="n">in_value3</span> <span class="o">|</span> <span class="n">out_random2</span> <span class="o">==</span> <span class="n">in_value2</span> <span class="o">|</span> <span class="n">out_random1</span> <span class="o">==</span> <span class="n">in_value1</span><span class="p">)</span> <span class="k">begin</span>
                    <span class="n">out_money</span> <span class="o">&lt;=</span> <span class="mb">2'b10</span> <span class="o">*</span> <span class="n">memory_in_money</span><span class="p">;</span>
                    <span class="n">next_state</span> <span class="o">&lt;=</span> <span class="n">S3</span><span class="p">;</span>
                <span class="k">end</span>
                <span class="k">else</span> <span class="k">begin</span>
                    <span class="n">out_money</span> <span class="o">&lt;=</span> <span class="mb">1'b0</span> <span class="o">*</span> <span class="n">memory_in_money</span><span class="p">;</span>
                    <span class="n">next_state</span> <span class="o">&lt;=</span> <span class="n">S3</span><span class="p">;</span>
                <span class="k">end</span>
            <span class="k">end</span>
</code></pre></div></div>

<p>S2 상태는 각 자리를 비교하여 조건에 맞는 out_money를 설정해준다. 이진수 숫자가 3개가 일치하는 경우는 x10배의 출력을, 숫자 2개가 일치하는 경우 x5배의 출력을, 숫자가 1개가 일치하는 경우 x2배의 입력 대비 값이 이진수 형태로 출력된다. 또한, 다음 상태인 S3로 이동한다.</p>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="n">S3</span><span class="o">:</span> <span class="k">begin</span> <span class="c1">// start가 1일때 S0으로 가는 것을 방지</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">~</span><span class="n">start</span><span class="p">)</span> <span class="c1">// start:0 -&gt; S0으로 이동</span>
                    <span class="n">next_state</span> <span class="o">&lt;=</span> <span class="n">S0</span><span class="p">;</span>
                <span class="k">else</span> <span class="k">begin</span>
                    <span class="n">next_state</span> <span class="o">&lt;=</span> <span class="n">S3</span><span class="p">;</span>
                    <span class="n">out_money</span> <span class="o">&lt;=</span> <span class="mb">7'b0</span><span class="p">;</span>
                <span class="k">end</span>
            <span class="k">end</span>
            <span class="k">default</span> <span class="n">state</span> <span class="o">&lt;=</span> <span class="n">S0</span><span class="p">;</span>
        <span class="k">endcase</span>
    <span class="k">end</span>
<span class="k">endmodule</span>
</code></pre></div></div>

<p>S3에서는 start가 0인지 1인지 판단한다. 만약 start가 1일 때 S0로 간다면 바로 S1으로 넘어가서 초기화를 하지 못하는 문제가 발생할 수 있기에 이를 방지한다.</p>

<h1 id="4-시뮬레이션">4. 시뮬레이션</h1>

<div class="language-verilog highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="n">tb</span><span class="p">;</span>

    <span class="kt">reg</span> <span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">start</span><span class="p">;</span>

    <span class="kt">wire</span> <span class="p">[</span><span class="mi">15</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">count</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="nb">random</span><span class="p">;</span>
    <span class="kt">wire</span> <span class="n">seed_pulse</span><span class="p">;</span>

    <span class="kt">reg</span> <span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">in_value1</span><span class="p">,</span> <span class="n">in_value2</span><span class="p">,</span> <span class="n">in_value3</span><span class="p">;</span>
    <span class="kt">reg</span> <span class="p">[</span><span class="mi">6</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">in_money</span><span class="p">;</span>
    <span class="kt">wire</span> <span class="p">[</span><span class="mi">3</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">out_random3</span><span class="p">,</span> <span class="n">out_random2</span><span class="p">,</span> <span class="n">out_random1</span><span class="p">;</span>
    <span class="kt">wire</span> <span class="p">[</span><span class="mi">9</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span> <span class="n">out_money</span><span class="p">;</span>

    <span class="n">slot_machine</span> <span class="n">sm1</span> <span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">in_value1</span><span class="p">,</span> <span class="n">in_value2</span><span class="p">,</span> <span class="n">in_value3</span><span class="p">,</span> <span class="n">in_money</span><span class="p">,</span> <span class="n">out_random3</span><span class="p">,</span> <span class="n">out_random2</span><span class="p">,</span> <span class="n">out_random1</span><span class="p">,</span> <span class="n">out_money</span><span class="p">);</span>

    <span class="n">counter</span> <span class="n">c1</span> <span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">seed_pulse</span><span class="p">);</span>
    <span class="n">lfsr</span> <span class="n">c2</span> <span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">seed_pulse</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">q</span><span class="p">);</span>
    <span class="nb">random</span> <span class="n">c3</span> <span class="p">(</span><span class="n">clock</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="nb">random</span><span class="p">);</span>

    <span class="k">initial</span>
    <span class="n">clock</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">always</span>
    <span class="p">#</span><span class="mi">5</span> <span class="n">clock</span> <span class="o">=</span> <span class="o">~</span><span class="n">clock</span><span class="p">;</span>

    <span class="k">initial</span>
    <span class="k">begin</span>
        <span class="n">reset_b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// 0</span>
        <span class="p">#</span><span class="mi">10</span> <span class="n">reset_b</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="c1">//10</span>
        <span class="p">#</span><span class="mi">380</span> <span class="n">reset_b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">end</span>

    <span class="k">initial</span>
    <span class="k">begin</span>
        <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">40</span> <span class="n">start</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">100</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">80</span> <span class="n">start</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">100</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">50</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">55</span> <span class="p">$</span><span class="nb">finish</span><span class="p">;</span>
    <span class="k">end</span>

    <span class="k">initial</span>
    <span class="k">begin</span>
        <span class="n">in_value3</span> <span class="o">=</span> <span class="mi">4'd1</span><span class="p">;</span> <span class="n">in_value2</span> <span class="o">=</span> <span class="mi">4'd3</span><span class="p">;</span> <span class="n">in_value1</span> <span class="o">=</span> <span class="mi">4'd4</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">20</span> <span class="n">in_value3</span> <span class="o">=</span> <span class="mi">4'd2</span><span class="p">;</span> <span class="n">in_value2</span> <span class="o">=</span> <span class="mi">4'd3</span><span class="p">;</span> <span class="n">in_value1</span> <span class="o">=</span> <span class="mi">4'd4</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">70</span> <span class="n">in_value3</span> <span class="o">=</span> <span class="mi">4'd2</span><span class="p">;</span> <span class="n">in_value2</span> <span class="o">=</span> <span class="mi">4'd3</span><span class="p">;</span> <span class="n">in_value1</span> <span class="o">=</span> <span class="mi">4'd4</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">70</span> <span class="n">in_value3</span> <span class="o">=</span> <span class="mi">4'd4</span><span class="p">;</span> <span class="n">in_value2</span> <span class="o">=</span> <span class="mi">4'd2</span><span class="p">;</span> <span class="n">in_value1</span> <span class="o">=</span> <span class="mi">4'd1</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">100</span> <span class="n">in_value3</span> <span class="o">=</span> <span class="mi">4'd4</span><span class="p">;</span> <span class="n">in_value2</span> <span class="o">=</span> <span class="mi">4'd4</span><span class="p">;</span> <span class="n">in_value1</span> <span class="o">=</span> <span class="mi">4'd1</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">100</span> <span class="n">in_value3</span> <span class="o">=</span> <span class="mi">4'd2</span><span class="p">;</span> <span class="n">in_value2</span> <span class="o">=</span> <span class="mi">4'd0</span><span class="p">;</span> <span class="n">in_value1</span> <span class="o">=</span> <span class="mi">4'd1</span><span class="p">;</span>
    <span class="k">end</span>

    <span class="k">initial</span>
    <span class="k">begin</span>
        <span class="n">in_money</span> <span class="o">=</span> <span class="mb">7'b1110</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">10</span> <span class="n">in_money</span> <span class="o">=</span> <span class="mb">7'b11010</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">30</span> <span class="n">in_money</span> <span class="o">=</span> <span class="mb">7'b111_1111</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">20</span> <span class="n">in_money</span> <span class="o">=</span> <span class="mb">7'b1_1011</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">10</span> <span class="n">in_money</span> <span class="o">=</span> <span class="mb">7'b0</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">90</span> <span class="n">in_money</span> <span class="o">=</span> <span class="mb">7'b110</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">20</span> <span class="n">in_money</span> <span class="o">=</span> <span class="mb">7'b1_1011</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">60</span> <span class="n">in_money</span> <span class="o">=</span> <span class="mb">7'b0</span><span class="p">;</span>
        <span class="p">#</span><span class="mi">150</span> <span class="n">in_money</span> <span class="o">=</span> <span class="mb">7'b110</span><span class="p">;</span>
    <span class="k">end</span>

    <span class="k">initial</span>
    <span class="p">$</span><span class="nb">monitor</span><span class="p">(</span><span class="s">"time:%3d  ||  start: %b, reset_b: %b, state: S%d  ||  count: %d  ||  lfsr: %b, random: %d  ||  BCD: %d, %d, %d, in_value: %d, %d, %d  ||  in_money: %d  -&gt;  out_money: %d  ||"</span><span class="p">,</span> <span class="p">$</span><span class="kt">time</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">reset_b</span><span class="p">,</span> <span class="n">sm1</span><span class="p">.</span><span class="n">state</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="nb">random</span><span class="p">,</span> <span class="n">out_random3</span><span class="p">,</span> <span class="n">out_random2</span><span class="p">,</span> <span class="n">out_random1</span><span class="p">,</span> <span class="n">in_value3</span><span class="p">,</span> <span class="n">in_value2</span><span class="p">,</span> <span class="n">in_value1</span><span class="p">,</span> <span class="n">in_money</span><span class="p">,</span> <span class="n">out_money</span><span class="p">);</span>
<span class="k">endmodule</span>
</code></pre></div></div>

<p><img src="https://github.com/radic2682/radic2682.github.io/assets/11177959/47211f1d-784f-404d-8680-f22e727aad2d" alt="image" /></p>

<p><img src="https://github.com/radic2682/radic2682.github.io/assets/11177959/ef29972d-0057-4558-9484-8f6f0705e686" alt="image" /></p>

<p><img src="https://github.com/radic2682/radic2682.github.io/assets/11177959/0e9b34a7-2066-4236-8f48-7acfee24dc08" alt="image" /></p>

<p><img src="https://github.com/radic2682/radic2682.github.io/assets/11177959/8a5335c5-2f97-4a34-8b4a-14d9e535478d" alt="image" /></p>

<h1 id="5-고찰">5. 고찰</h1>
<p>Timer를 이용한 슬롯머신을 verilog HDL 언어를 통해 기술하였다. 추가적인 lfsr에 대해 알 수 있었고, random의 생성 방법에 대해 알 수 있었다. 또한, 순차회로의 기술 방법에 대해 실습을 하면서 더욱 잘 알 수 있었다. 이에 따라 회로를 기술하는 능력이 향상되었음을 느꼈다.</p>

<p>결과로는 시뮬레이션의 결과를 보면 알 수 있다. 붉은색의 start 신호가 가해졌을 때, lfsr에 timer의 seed값이 잘 인가되는 것을 확인할 수 있었다. 또한, 이에 따라 정해진 magic 값만큼 clock이 흘렀을 때, lfsr이 정해진 만큼 섞였을 때 random값이 출력되고 이에 BCD로 변환한 것의 아래에서부터 3자리를 in_value와 비교하는 것을 보여준다. 27의 입력을 받았는데, 1자리가 일치하기에 2배한 돈이 출력되는 것을 확인할 수 있다.</p>

<p>또한, 127의 돈이 입력이 되면 1~100에 해당이 되지 않기에 다시 입력을 받는 것도 확인할 수 있었다.</p>

<p>두 번째 start일 때는 27의 입력을 받았고, 3자리가 일치하기 때문에 10배한 270값이 출력되었다.</p>

<p>마지막은 reset_b가 0이 되었을 때, 비동기 리셋 명령이 실행되어 모든값이 초기화되는 것을 확인할 수 있다. 이때, 머신이 돈을 가져가면 안되기에 돈은 입력을 그대로 출력하였다.</p>

<p>위 결과에 따라 주어진 명세서의 내용을 만족하는 설계를 마쳤다.</p>

            </div>
            <td></td>
            <!-- <div class="tag_title">
            </div>

            <div class="tag_label">
            </div> -->

            <div class="comment_box">
                <script src="https://utteranc.es/client.js"
                        repo="radic2682/radic2682.github.io"
                        issue-term="pathname"
                        theme="github-light"
                        crossorigin="anonymous"
                        async>
                </script>
            </div>

        </div>

    </div>

    <!-- HTML -->
    <div id="postModal">
        <div class="menu_close_btn">
            <img width="64" height="64" src="https://img.icons8.com/sf-black-filled/64/x.png" alt="x" onclick="closeModal()"/>
        </div>

        <div class="main_img">
            <img class="left" width="96" height="96" src="https://img.icons8.com/fluency/96/left.png" alt="left" onclick="leftModal()"/>
            <div></div>
            <img class="right" width="96" height="96" src="https://img.icons8.com/fluency/96/right.png" alt="right" onclick="rightModal()"/>
        </div>
        <div class="all_img"></div>
    </div>

</div>

<div class="table_contents">
    <div class="table_contents_btn" onclick="table_close_click()"><p>C</p></div>
    <p class="table_title">Contents</p>
    <div class="table_content_inner"></div>
</div>




<script src="/assets/js/add_img_in_li.js"></script>
<script src="/assets/js/add_language_in_codeBlock.js"></script>
<script src="/assets/js/tableContents.js"></script>
<script src="/assets/js/postModal.js"></script>
 </div>
          
          <div class="page_footer">
    <p>© Copyright 2023 Sun Hong</p>
</div>

        </div>
      </div>
    </div>

    <script src="/assets/js/srollbar.js"></script>
    <script src="/assets/js/top_nav.js"></script>
    <script src="/assets/js/sidebar.js"></script>
    
    
  </body>
</html>

